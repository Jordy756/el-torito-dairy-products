---
import MainSection from "@components/MainSection.astro";
import ProductCard from "@components/ProductCard.astro";
import { productsSection } from "@data";

const { title, description, products } = productsSection;
---

<MainSection id="products" flexDirection="column">
    <header>
        <h2>{title}</h2>
        <p>{description}</p>
    </header>
    <main>
        {
            products.map(({ name, image, description, gridArea }) => (
                <ProductCard name={name} image={image} description={description} gridArea={gridArea} />
            ))
        }
    </main>
</MainSection>

<style>
    header {
        text-align: center;
    }

    main {
        flex: 1;
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        grid-template-rows: repeat(6, 1fr);
        gap: 1rem;
        grid-auto-flow: row;
        grid-template-areas:
            "product1 product1 product2 product2 product2 product3 product3 product3"
            "product1 product1 product2 product2 product2 product3 product3 product3"
            "product4 product4 product2 product2 product2 product5 product5 product5"
            "product4 product4 product2 product2 product2 product5 product5 product5"
            "product4 product4 product6 product6 product6 product6 product7 product7"
            "product4 product4 product6 product6 product6 product6 product7 product7";
    }

    @media screen and (width <= 999px) {
        main {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(4, 1fr);
            grid-template-areas:
                "product1 product2"
                "product3 product4"
                "product5 product6"
                "product7 product7";
        }
    }

    @media (max-width: 767px) {
        main {
            grid-template-columns: 1fr;
            grid-template-areas:
                "product1"
                "product2"
                "product3"
                "product4"
                "product5"
                "product6"
                "product7";
        }
    }
</style>
